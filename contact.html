<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>StrayCare â€” Contact</title>
    <meta name="description" content="Contact StrayCare for rescue, adoption, and support.">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header>
      <div class="container">
        <a href="index.html" aria-label="StrayCare Home">
          <h1>StrayCare</h1>
        </a>
        <nav aria-label="Primary">
          <ul>
            <li><a href="about.html">About</a></li>
            <li><a href="adopt.html">Adopt</a></li>
            <li><a href="donate.html">Donate</a></li>
            <li><a href="volunteer.html">Volunteer</a></li>
            <li><a href="emergency.html">Emergency</a></li>
            <li><a href="contact.html" aria-current="page">Contact</a></li>
          </ul>
        </nav>
        <div class="user-actions">
          <div class="user-dropdown">
            <button class="user-icon" aria-label="User Menu">ðŸ‘¤</button>
            <div class="dropdown-menu">
              <a href="login.html">Login</a>
              <a href="register.html">Register (User)</a>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <div class="container">
        <section aria-labelledby="get-in-touch-title">
          <h2 id="get-in-touch-title">Get in touch</h2>
          <form>
            <label>
              Name
              <input type="text" name="name" placeholder="Your full name">
            </label>
            <label>
              Email
              <input type="email" name="email" placeholder="you@example.com">
            </label>
            <label>
              Message
              <textarea name="message" rows="5" placeholder="How can we help?"></textarea>
            </label>
            <button type="submit">Send</button>
          </form>
        </section>

        <section aria-labelledby="details-title" class="contact-details">
          <div class="contact-info">
            <h2 id="details-title">Details</h2>
            <address>
              StrayCare Shelter<br>
              123 Paw Lane, City, State<br>
              Phone: <a href="tel:+10000000000">+1 000 000 0000</a><br>
              Email: <a href="mailto:hello@stray.care">hello@stray.care</a>
            </address>
          </div>
          <div class="contact-image">
            <img src="https://images.unsplash.com/photo-1587764379873-97837921fd44?w=400&h=300&fit=crop&crop=center" alt="StrayCare shelter" loading="lazy">
          </div>
        </section>
      </div>
    </main>

    <footer>
      <div class="container">
        <p>
          Â© <span id="year">2025</span> StrayCare
          â€¢ <a href="contact.html" aria-current="page">Contact</a>
          â€¢ <a href="donate.html">Donate</a>
        </p>
      </div>
    </footer>
    
    <style>
      /* Fix input text visibility */
      input, textarea, select {
        background: rgba(255, 255, 255, 0.95) !important;
        color: #333 !important;
        border: 2px solid #e1e8ed !important;
      }
      
      input::placeholder, textarea::placeholder {
        color: #666 !important;
      }
      
      /* Fix contact details visibility */
      .contact-details address {
        background: rgba(255, 255, 255, 0.9);
        padding: 1.5rem;
        border-radius: 12px;
        border-left: 4px solid #FF8C00;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      }
      
      .contact-details address a {
        color: #FF8C00 !important;
        font-weight: 600 !important;
        text-decoration: underline !important;
        display: inline-block;
        padding: 0.25rem 0.5rem;
        background: rgba(255, 140, 0, 0.1);
        border-radius: 6px;
        margin: 0.25rem 0;
      }
      
      .contact-details address a:hover {
        color: #FF6347 !important;
        background: rgba(255, 99, 71, 0.15) !important;
        text-decoration: none !important;
        transform: translateY(-1px);
      }
      
      .contact-details {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        align-items: start;
      }
      
      .contact-image img {
        width: 100%;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      }
      
      @media (max-width: 768px) {
        .contact-details {
          grid-template-columns: 1fr;
          gap: 1.5rem;
        }
      }
    </style>
    
    <script>
      // Contact form submission handler
      document.addEventListener('DOMContentLoaded', function() {
        const contactForm = document.querySelector('form');
        
        contactForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          
          const submitButton = contactForm.querySelector('button[type="submit"]');
          const originalButtonText = submitButton.textContent;
          
          // Get form data
          const formData = {
            name: contactForm.querySelector('input[name="name"]').value.trim(),
            email: contactForm.querySelector('input[name="email"]').value.trim(),
            message: contactForm.querySelector('textarea[name="message"]').value.trim()
          };
          
          // Validate form data
          if (!formData.name || !formData.email || !formData.message) {
            alert('Please fill in all fields');
            return;
          }
          
          // Disable submit button
          submitButton.disabled = true;
          submitButton.textContent = 'Sending...';
          
          try {
            console.log('Submitting form data:', formData);
            
            const response = await fetch('/api/contact', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(formData)
            });
            
            console.log('Response status:', response.status);
            console.log('Response headers:', response.headers);
            
            // Check if response has content
            const contentType = response.headers.get('content-type');
            if (!contentType || !contentType.includes('application/json')) {
              throw new Error('Server did not return JSON. Status: ' + response.status);
            }
            
            const result = await response.json();
            console.log('Response data:', result);
            
            if (response.ok && result.success) {
              alert(result.message || 'Thank you for contacting us! We will get back to you soon.');
              contactForm.reset();
            } else {
              console.error('Server error:', result);
              alert(result.error || 'Failed to submit the form. Please try again.');
            }
          } catch (error) {
            console.error('Error submitting contact form:', error);
            if (error.message.includes('Failed to fetch')) {
              alert('Cannot connect to server. Please make sure the server is running on http://localhost:3000');
            } else if (error.message.includes('JSON')) {
              alert('Server error: The server returned an invalid response. Please check the server console for errors.');
            } else {
              alert('An error occurred: ' + error.message);
            }
          } finally {
            // Re-enable submit button
            submitButton.disabled = false;
            submitButton.textContent = originalButtonText;
          }
        });
      });
    </script>
  </body>
</html>


